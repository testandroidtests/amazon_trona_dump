// Comments are accepted in JSON configuration files. Use cJSON_Minify to strip them prior to parsing.
{
    "Hardware Definition":
        {
            "Name"                  : "Trona",
            "Num Mics"              : 2,
            "Num Speakers"          : 2,
            "Num Max Speakers"      : 2,
            "Mics SamplingRate"     : 48000,
            "ASR Path SamplingRate" : 16000,
            "Speakers SamplingRate" : 48000,
            "Loopback Ref SamplingRate" : 48000
        },

    "Global Definition":
        {
            "Num Max Speakers"      : 2,
            "Num Internal Speakers" : 2,

            "Time to mute after unmute in ms - ASR"  : 200,
            "Time to mute after unmute in ms - VOIP" : 500,

            // "True" is the default mode
            // If there is a reference signal, we will use AEC, otherwise we will use ANC
            // FBF is always enabled
            "Enable AEC/ABF according to ref level" : true,

            // if above is true,  this forces enable flags
            // if above is false, this forces enable flags, but only when AEC/ABF is in used according to ref levels
            "Enable ABF" : true,
            "Enable AEC" : true
        },

    "Path Definition":
        {
            "ASR":
                {
                    // Note: Frames are processed roughly in this order within the AFE
                    "Algorithms":
                        {
                            "Downsampler"           : "Downsampler IIR",
                            "HPF"                   : "HPF 80Hz @ 16K",   // both mic In + ref In
                            "FilterBank"            : "ASR FilterBank",
                            "AEC"                   : "ASR AcousticEchoCanceler",
                            "SerialARA"             : "ASR Serial ARA",
                            "SerialARA_EXT"         : "ASR Serial ARA BT",
                            "SerialARA_BeamMerger"  : "ASR SerialARA BeamMerger",
                            "MicDelay"              : "ASR Mic Delay Line",
                            "ABF"                   : "ASR AdaptiveBeamFormer",
                            "SerialARA_BeamSelector": "ASR SNRBeamSelector",
                            "VAD"                   : "Voice Activity Detector",
                            "MicEnergy"             : "ASR Mic Energy Computation", //Computes mic energy to help decide resetting modules.
                            "MicOcclusionDetector"  : "Mic Occlusion Detector",
                            "OutputGain"            : "ASR Output Gain"
                        }
                },

            "Voice":
                {
                    "Algorithms":
                        {
                            "MicrophoneInputSelector"   : "VOIP Microphone Selector",  // mic channel index selected, start from 0
                            "Downsampler"               : "Downsampler IIR",
                            "HPF"                       : "HPF 80Hz @ 16K",   // both mic In + ref In
                            "FilterBank"                : "VOIP FilterBank",
                            "VAEC"                      : "VOIP VAEC",
                            "ResidualEchoSuppressor"    : "Frequency Masking Lite RES",
                            "NoiseReductor"             : "Recursive Magnitude Estimation NR",
                            "ComfortNoiseGenerator"     : "Random Filler CNG",
                            "AGC"                       : "FB Automatic Gain Control",
                            "GainRampUp"                : "GainRampUp",
                            "SFRCompensationFilter"     : "VOIP Tx Parametric IIR",
                            "VOIPTxLimiter"             : "VOIP Tx Limiter"
                        }
                },

            "Mic":
                {
                    "Algorithms":
                        {

                        }
                },

            "Playback":
                {
                    "Algorithms":
                        {
                            //"Crossover"             : "Crossover",
                            //"AVL"                   : "Automatic Volume Leveling",
                            //"EQ"                    : "Equalizer FIR",
                            "OutputLimiter"           : "Full band output limiter",
                            "BatteryLevelHandler"     : "Battery Level Handler"
                        }
                },

            "Playback VOIP":
                {
                    "Algorithms":
                        {
                            "ResamplerCoeffs"       : "VOIP Rx Resampler Coeffs",  // same coeffs used for downsampler and upsampler
                            //"FilterBank"            : "VOIP Rx FilterBank",
                            "RxFullbandNR"          : "VOIP Rx Fullband NR",
                            //"NoiseReductor"         : "VOIP Rx Recursive Magnitude Estimation NR",
                            "RxFullbandAGC"         : "VOIP Rx Fullband AGC",
                            "RFRCompensationFilter" : "VOIP Rx Parametric IIR",
                            "MBCL"                  : "VOIP MBCL"
                        }
                }
        },

    "Algorithm Definition":
        {
            "ASR FilterBank":
                {
                    "FFT Len"               : 128,
                    "Decimation Rate"       : 64,
                    "FilterLen"             : 640,
                    "AnaSynFilterCoefs"     : "coefs_FilterBank_640.cfg"
                },

            "ASR AcousticEchoCanceler":
                {
                    // The number of inputs is set-up at run-time, it's the number of microphones in the system
                    // "Adapted Inputs Indexes": [ 0, 1, 2, 3, 4, 5, 6 ],

                    // Generic Canceler : AEC
                    "Num Refs Per Input"    : 2,

                    "TailLen"               : 2560,
                    "MaxStepSize"           : 0.2,

                    "adaptBandLoHz"         : 0,
                    "adaptBandHiHz"         : 8000,

                    "leakyFactor"           : 1.0,
                    "DivFactorThd"          : 1.0,
                    "RegFactorScale"        : 1E-5,

                    "bandBasedTailLen"      : true,
                    "bandBasedStepSize"     : true,

                    "stepSizeRednScale"     : 5.0,
                    "stepSizeErrorScale"    : 5.0,

                    // AEC specific parameters
                    "RefSigEnThresh"        : 0,    //3.1623E-6,  // corresponds to wideband level of -55 dB (ref signal) power:10^(-55/10) = 3.162 E-6
                    "Enable VSS"            : true,

                    // Round Robin Logic
                    "Ord2 to Ord1 ratio Percent"      : 50
                },


           "ARA BT RefTarBeamSelector":
               {
                    "Num Frames For Transition"    : 40,
                    "Power threshold for ref"      : 2.0,  // aprox 3dB
                    "Power threshold for tar"      : 0.5,  // aprox -3dB
                    "Smoothing factor alpha"       : 0.999
               },

           "ASR Mic Delay Line":
               {
                    "Mic Input delay"              : 64 //Samples to delay mic input provided to AEC
               },

            "ASR Mic Energy Computation":
                {
                    "Mic Energy Init Value"      : 9.5E-7,
                    "Mic Enegry Silence Threshold" : 9.5E-7,
                    "Mic Energy Smoothing factor" : 0.998
                },

            "ASR SNRBeamSelector":
                {
                    "energyAdaptationFactorFast"      : 0.95,
                    "energyAdaptationFactorSlow"      : 0.987,
                    "energyRatio"                     : 1.2,
                    "noiseAdaptationFactor"           : 1.001,
                    "bufferSize"                      : 10,
                    "hangoverPeriod"                  : 15,
                    "SNRThreshold"                    : 6.5
                },

            "ASR Serial ARA":
                {
                     // The number of inputs is set-up at run-time, it's the number of microphones in the system
                     "Adapted Inputs Indexes": [ 0, 2, 4, 6 ],

                     "Num Refs Per Input"    : 2,
                     "Input-References Info" :
                        [
                            //2 references per target beam
                            [ 6,  5],
                            [ 6,  5],
                            [ 0,  1],
                            [ 0,  1]
                        ],

                     "TailLen"               : 2560,
                     "MaxStepSize"           : 0.3,

                     "adaptBandLoHz"         : 0,
                     "adaptBandHiHz"         : 8000,

                     "leakyFactor"           : 0.4,
                     "DivFactorThd"          : 1.0,
                     "RegFactorScale"        : 1E-4,

                     "bandBasedTailLen"      : true,
                     "bandBasedStepSize"     : true,

                     "stepSizeRednScale"     : 3.0,
                     "stepSizeErrorScale"    : 3.0,

                     "EnergyStartFreqHz"               : 500,
                     "EnergyEndFreqHz"                 : 3500,
                     "KNoiseAlpha"                     : 0.999,
                     "KEnergyAlpha"                    : 0.75,
                     "KVssScaleFactorNr"               : 0.15,
                     "KVssScaleFactorDr"               : 0.5,
                     "VSS freeze threshold"            : 0.75,
                     "InitialFastConvergenceTimeSec"   : 15,
                     "Reset time in sec on silence"    : 900,  //15 minutes
                     "Use XCorr for VSS"               : true,

                     // AEC specific parameters
                     "RefSigEnThresh"        : 3.1623E-6,  // corresponds to wideband level of -55 dB (ref signal) power:10^(-55/10) = 3.162 E-6
                     "Enable VSS"            : true,

                     //Output gain params
                     "Gain step"                  : 0.2,
                     "Max gain ARA With Playback" : 1.3,
                     "Max gain ARA No Playback"   : 1.3,

                     // Round Robin Logic
                     "Ord2 to Ord1 ratio Percent"      : 50
                },

             "ASR Serial ARA BT":
                {
                      // The number of inputs is set-up at run-time, it's the number of microphones in the system
                      "Adapted Inputs Indexes": [ 0, 1, 2, 3 ],

                      "Num Refs Per Input"    : 2,
                      "Input-References Info" :
                           [
                           //For BT mode, make sure we initialize same reference set for all target beams.
                               [ 5,  6],
                               [ 5,  6],
                               [ 5,  6],
                               [ 5,  6]
                           ],

                      "ReferenceTargetBeamSelector" : "ARA BT RefTarBeamSelector", //To make BT ARA use dynamic beam selection for inputs

                      "TailLen"               : 2560,
                      "MaxStepSize"           : 0.3,

                      "adaptBandLoHz"         : 0,
                      "adaptBandHiHz"         : 8000,

                      "leakyFactor"           : 0.4,
                      "DivFactorThd"          : 1.0,
                      "RegFactorScale"        : 1E-5,

                      "bandBasedTailLen"      : true,
                      "bandBasedStepSize"     : true,

                      "stepSizeRednScale"     : 3.0,
                      "stepSizeErrorScale"    : 3.0,

                      "EnergyStartFreqHz"               : 500,
                      "EnergyEndFreqHz"                 : 3500,
                      "KNoiseAlpha"                     : 0.999,
                      "KEnergyAlpha"                    : 0.75,
                      "KVssScaleFactorNr"               : 0.15,
                      "KVssScaleFactorDr"               : 0.5,
                      "VSS freeze threshold"            : 0.75,
                      "InitialFastConvergenceTimeSec"   : 15,
                      "Reset time in sec on silence"    : 900,  //15 minutes
                      "Use XCorr for VSS"               : true,


                      // AEC specific parameters
                      "RefSigEnThresh"        : 3.1623E-6,  // corresponds to wideband level of -55 dB (ref signal) power:10^(-55/10) = 3.162 E-6
                      "Enable VSS"            : true,

                      //Output gain params
                      "Gain step"                  : 0.2,
                      "Max gain ARA With Playback" : 2.0,
                      "Max gain ARA No Playback"   : 4.0,

                      // Round Robin Logic
                      "Ord2 to Ord1 ratio Percent"      : 50
                  },



           "ASR SerialARA BeamMerger":
                {
                    "SNRThreshold"                    : 1.0E-6,
                    "EnergyStartFreqHz"               : 500,
                    "EnergyEndFreqHz"                 : 3500,
                    "FDAlphaNoise"                    : 0.998,
                    "FDAlphaSpeech"                   : 0.65,
                    "KNoiseAlpha"                     : 0.999,
                    "KEnergyAlpha"                    : 0.75,
                    "KVssScaleFactor"                 : 0.5,
                    "BeamMerger beam bias speechOn"       : 0.0,
                    "BeamMerger best beam bias speechOn"  : 0.0,
                    "BeamMerger beam bias speechOff"      : 0.0,
                    "BeamMerger best beam bias speechOff" : 0.0,
                    "InitialFastConvergenceTimeSec"   : 15
                },


            "ASR UlpwwBeamSelector":
               {
                    "BeamController mode"      : "ULPWW_ONLY",
                    "BeamController nBest"     : 2,
                    "Default beam index"       : 2,
                    "Ulpww Hangover in ms"     : 2000,
                    "Ulpww model file"         : "ulpww_50k.en-US.alexa.bin",
                    "Frame size in ms"         : 8
               },

            "ASR InterferenceLocalizer":
                {
                    "noiseAdaptationFactor"           : 0.99997,
                    "noiseThreshold"                  : 0.00004,    // -44dB
                    "noiseFloor"                      : 0.000001,  // -60dB
                    "DiffThreshold"                   : 2.3,
                    "accumulatePeriod"                : 37500,    //5 minutes
                    "subsetBeamNum"                   : 2
                },

            "ASR FixedBeamFormer":
                {
                    "Num Source Beams"  : 7,
                    "Num Coefficients"  : 4,
                    "BeamFormingCoefs"  : "coefs_FBF.cfg"
                },
            "ASR RefBeamSelector":
                    {
                        "Second Beam Index"                   : 1,
                        "Ratio Beam Index"                    : 3,
                        "Threshold Beam Index"                : 3,
                        "Ratio Threshold"                     : 0.4,
                        "Smooth Fact Fast"                    : 0.83,
                        "Smooth Fact Slow"                    : 0.87,
                        "Num Frames For Transition"           : 80
                    },

            "ASR SIRBeamSelector":
                {
                    "Enable"                : false,
                    "Num Beams"             : 7,
                    "Num Nulls Per Beam"    : 2,
                    "Num of Selected Beams" : 3
               },

            "ASR AdaptiveBeamFormer":
                {
                    // The number of inputs of the FBF is set-up at run-time, it's the number of microphones in the system
                    "FixedBeamFormer"   : "ASR FixedBeamFormer",

                    // The number of inputs of the ANC is set-up at run-time, it's the number of beams (outputs of FBF)
                    // "Adapted Inputs Indexes": [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11 ],
                    "Num Beams"             : 7,

                    // Generic Canceler : ANC
                    "Num Refs Per Input"    : 2,        // 2 nulls per beam

                            // subset of the source beams, with adaptation
                            // index   0   1   2   3   4   5   6   7   8   9  10  11
                            // Angles  0  30  60  90 120 150 180 210 240 270 300 330
                            "Input-References Info" :
                            [
                                [ 6,  5],
                                [ 6,  5],
                                [ 2,  3],
                                [ 2,  3],
                                [ 2,  3],
                                [ 0,  1],
                                [ 0,  1]
                            ],

                    "TailLen"               : 1536,
                    "MaxStepSize"           : 0.4,
                    "adaptBandLoHz"         : 200,
                    "adaptBandHiHz"         : 8000,

                    "leakyFactor"           : 0.8,
                    "DivFactorThd"          : 20.0,
                    "RegFactorScale"        : 20E-5,

                    "bandBasedTailLen"      : false,
                    "bandBasedStepSize"     : false,

                    "stepSizeRednScale"     : 5.0,
                    "stepSizeErrorScale"    : 5.0,


                    // ANC specific parameters
                    "RefSigEnThresh"        : 0,
                    "Enable VSS"            : true,
                    "Enable RoundRobin"     : true,

                    "VSSLoHz"               : 500, // VSSHz must be included in AdaptHz range
                    "VSSHiHz"               : 4000
                },
            "ASR AcousticInterferenceCanceler":
                {

                    // FBF (imposes the number of source beams, only a subset might be used "Num Beams")
                    "FixedBeamFormer"       : "ASR FixedBeamFormer",

                    "Generic Cancelers":
                    [

/*
                        {
                            // Canceller with Reference (AEC)
                            "Enable"                : true,
                            "Num Refs Per Input"    : 2, // 2 echo reference per input (indexes 0 & 1)

                            "TailLen"               : 2560,
                            "MaxStepSize"           : 0.2,

                            "adaptBandLoHz"         : 0,
                            "adaptBandHiHz"         : 8000,

                            "leakyFactor"           : 1.0,
                            "DivFactorThd"          : 1.0,
                            "RegFactorScale"        : 1E-5,

                            "bandBasedTailLen"      : true,
                            "bandBasedStepSize"     : true,

                            "stepSizeType"          : "SS_AEC_ORIGINAL",
                            "stepSizeRednScale"     : 5.0
                        },
*/
                        // Generic Canceler : ANC
                        {
                            // Generic Canceler
                            "Enable"                : true,
                            "Num Refs Per Input"    : 2,        // 2 nulls per beam
                            // "References Source"     : "Inputs",

                            // subset of the source beams, with adaptation
                            // index   0   1   2   3   4   5   6   7   8   9  10  11
                            // Angles  0  30  60  90 120 150 180 210 240 270 300 330
                            "Input-References Info" :
                            [
                                // input = beam
                                // reference = null
                                // 2 nulls per beam
                                // format: [ source beam index, [ null beam index #1, null beam index #2 ] ]
                                [ 2,  4],
				[ 3,  5],
				[ 4,  0],
				[ 5,  1],
				[ 0,  2],
				[ 1,  3]
                            ],

                            "TailLen"               : 1536,
                            "MaxStepSize"           : 0.1,

                            "adaptBandLoHz"         : 200,
                            "adaptBandHiHz"         : 7000,
                            "leakyFactor"           : 0.9997,
                            "DivFactorThd"          : 1.0,
                            "RegFactorScale"        : 2.5E-4,

                            "bandBasedTailLen"      : false,
                            "bandBasedStepSize"     : false,

                            "stepSizeType"          : "SS_ABF_ORIGINAL",
                            "stepSizeRednScale"     : 1.0
                        }
                    ],

                    // subset of the source beams, with adaptation
                    // index   0   1   2   3   4   5   6   7   8   9  10  11
                    // Angles  0  30  60  90 120 150 180 210 240 270 300 330
                    "Num Beams"             : 6,

                    "RefSigEnThresh"        : 0, //1E-8,
                    "VSSLoHz"               : 1000, // VSSHz must be included in AdaptHz range
                    "VSSHiHz"               : 6000,

                    // AEC
                    "stepSizeErrorScale"    : 5.0

                },

            "ASR Output Gain":
               {
                    "BoostdB"               : 0.0
               },

            "VOIP Microphone Selector":
               {
                    "VoIP MicInputChannelIndex"    :  0  // starting from 0
               },

            "VOIP FilterBank":
                {
                    "FFT Len"               : 256,
                    "Decimation Rate"       : 128,
                    "FilterLen"             : 1024,
                    "AnaSynFilterCoefs"     : "coefs_FilterBank_AnalysisSynthesis_1024.cfg"
                },

            "VOIP Rx FilterBank":
                {
                    "FFT Len"               : 256,
                    "Decimation Rate"       : 128,
                    "FilterLen"             : 1024,
                    "AnaSynFilterCoefs"     : "coefs_FilterBank_AnalysisSynthesis_1024.cfg"
                },

            "False WW Prevention":
			{
				"enable" : true,
				"Fast smoothing constant" : 0.9,
				"Slow smoothing constant" : 0.99,
				"Clipping Threshold high" : 1.0,
				"Clipping Threshold low"  : -1.0,
				"Variance Threshold"      : 7.0,
				"Time constant"           : 0.0,
				"Hold threshold"          : 0.6,
				"Double talk threshold volume 10" : 1.0,
				"Single talk threshold volume 10" : 6.0,
				"Double talk threshold volume 20" : 4.0,
				"Single talk threshold volume 20" : 10.0,
				"Double talk threshold volume 30" : 9.0,
				"Single talk threshold volume 30" : 15.0,
				"Double talk threshold volume 40" : 14.0,
				"Single talk threshold volume 40" : 20.0,
				"Double talk threshold volume 50" : 16.0,
				"Single talk threshold volume 50" : 22.0,
				"Double talk threshold volume 60" : 18.0,
				"Single talk threshold volume 60" : 24.0,
				"Double talk threshold volume 70" : 18.0,
				"Single talk threshold volume 70" : 24.0,
				"Double talk threshold volume 80" : 18.0,
				"Single talk threshold volume 80" : 24.0,
				"Double talk threshold volume 90" : 18.0,
				"Single talk threshold volume 90" : 24.0,
				"Double talk threshold volume 100": 18.0,
				"Single talk threshold volume 100": 24.0
			},

             "VOIP VAEC" :     // copied from Croissant
             {
                 "bypass"                             : false,
                 "muMin"                              : 0.2, //0.2, //0.15, //0.1,   // min step-size
                 "muMax"                              : 0.3, //0.2, //0.15, //0.1,    // max step-size
                 "adaptLeakFactor"                    : 1.0,    // set to less than 1 for leaky adaptive filter
                 "minIter"                            : 4, //5, //4, //3,      // min number of iterations
                 "maxIter"                            : 4, //5, //4, //3,      // max number of iterations
                 "refPwrVSSMdPt"                      : 0.1,    // sigmoid mid-point for ref-power based VSS
                 "refPwrVSSSlp"                       : 5.0,   // sigmoid slope for ref-power based VSS
                 "velVSSMdPt"                         : 0.0,    // sigmoid mid-point for velocity-based VSS
                 "velVSSSlp"                          : 1.0,    // sigmoid slope for velocity-based VSS
                 "soundSpeed"                         : 343.0,  // sound speed in m/s
                 "maxVelocity"                        : 0.75,   // max velocity in m/s
                 "dopSprdMdPt"                        : 0.125,  // sigmoid mid-point for Doppler spread based num iterations
                 "dopSprdSlp"                         : 10,     // sigmoid slope for Doppler spread based num iterations
                 "tailLenSec"                         : 250e-3, //150e-3, // Tail length in seconds
                 "samplingFrequency"                  : 16000.0, // sampling frequency in Hz
                 "velSmoothingCoef"                   : 0.95,
                 "velUpdateThreshold"                 : 5,

                 "Enable Velocity Based VSS"          : false,
                 "Enable Ref Pow Based VSS"           : true,
                 "Enable Adapt Num Iteration"         : false,
                 "Enable Adapt Tail Length"           : false,

                 // RVSS - Robust Variable Step-Size
                 "Enable RVSS"                        : true,
                 "RVSS Delta Min"                     : 1.0e-2,
                 "RVSS Delta Init"                    : 5.0,
                 "RVSS Time Constant (sec)"           : 10.0,
                 "RVSS Regularization"                : 2.0e-3
             },

             "Frequency Masking Lite RES":  // copied from Croissant
             {
                 "numVolume"             : 10,
                 "aecVssSumTh"           : 100000, // this does not work in combination with RAEC

                 // RES initial aggressiveness parameter
                 "largeAttenuationFactor"      : 1.0e6,  // same as statHigh below, but only during timer count down
                 "initAggressiveCounterFrames" : 600,

                 // RES mask modifications
                 "maskFreqSmoothTc"      : 0.02,
                 "maskTimeSmoothTc"      : 0.0,
                 "erleUpTh"              : 1.0, // linear domain (not dB)
                 "attnFactorScale"       : 1.0,

                 // There are 10 values per parameter: One per volume
                 //                               Vol1,      Vol2,      Vol3,      Vol4,      Vol5,      Vol6,      Vol7,      Vol8,      Vol9,     Vol10
                 "smoothFactorPower"     : [       0.0,       0.0,       0.0,       0.0,       0.0,       0.0,       0.0,       0.0,       0.0,       0.0],
                 "statHigh"              : [       6.0,       6.0,       6.0,       6.0,       7.0,       7.0,       7.0,       8.0,       8.0,       8.0],
                 "dtdSmoothUp"           : [       0.5,       0.5,       0.5,       0.5,       0.5,       0.5,       0.5,       0.5,       0.5,       0.5],
                 "dtdSmoothDown"         : [       0.8,       0.8,       0.8,       0.8,       0.8,       0.8,       0.8,       0.8,       0.8,       0.8],
                 "dtdDecisionTh"         : [      0.25,      0.25,      0.25,      0.25,      0.25,      0.25,      0.25,      0.25,      0.25,      0.25],
                 "eesEnergyThresh"       : [      4E-7,      4E-7,      4E-7,      4E-7,      5E-7,      5E-7,      5E-7,      6E-7,      6E-7,      6E-7],
                 "eesMaskGainThresh"     : [       0.9,       0.9,       0.9,       0.9,       0.9,       0.9,       0.9,       0.9,       0.9,       0.9],
                 "eesGainFactor"         : [      0.01,      0.01,      0.01,      0.01,      0.01,      0.01,      0.01,      0.01,      0.01,      0.01]
             },

           "Recursive Magnitude Estimation NR":
               {
                    "bypass"                : false,
                    "numBands"              : 128,
                    "numChannels"           : 1,
                    "filterWidth"           : 0,
                    "inputAdaptationFactor" : 0.8,
                    "noiseAdaptationFactor" : 1.005,
                    "noiseIncMin"           : 1E-6,
                    "noiseAmpFactor"        : 10.0,
                    "gainExponent"          : 1.0,
                    "peakAdaptationFactor"  : 0.9995,
                    "noiseInputRatio"       : 1000, // this value basically disables the feature
                    "initMag"               : 1E-3
                },

            "VOIP Rx Recursive Magnitude Estimation NR":
                {
                    "bypass"                : false,
                    "numBands"              : 128,
                    "numChannels"           : 1,
                    "filterWidth"           : 0,
                    "inputAdaptationFactor" : 0.8,
                    "noiseAdaptationFactor" : 1.005,
                    "noiseIncMin"           : 1E-6,
                    "noiseAmpFactor"        : 10.0,
                    "gainExponent"          : 1.0,
                    "peakAdaptationFactor"  : 0.9995,
                    "noiseInputRatio"       : 1000, // * this value basically disables the feature
                    "initMag"               : 1E-3
                },


            "VOIP Rx Fullband NR":
            {
                "bypass"                : false,
                "nfft"                  : 256,
                "D"                     : 80,
                "V"                     : 160,
                "trainingFrames"        : 30,
                "alphaSmooth"           : 0.7,
                "alphaMax"              : 0.96,
                "minSearch"             : 2.12,
                "vadThreshold"          : 2.0,
                "vadHangover"           : 2,
                "minFactor"             : 4,
                "divFactor"             : 1.5,      // can't be 0!
                "noiseSmooth"           : 0.99,
                "noiseControl"          : 1.5,
                "gainSmooth"            : 0.55,
                "minSnr"                : 1E-16,
                "maxSnr"                : 40,
                "snrSmooth"             : 0.98
            },

            "Random Filler CNG":
            {
                "bypass"            : false,
                "numBands"          : 128,
                "numChannels"       : 1,
                "noiseBias"         : -90, // Bias term, in dB, to be added to noise estimate.
                                           // Important Note: In tuning this term, the AGC's constant gain
                                           // needs to be taken into account
                "excludeTopNBands"  : 16
            },

              "VOIP Rx Parametric IIR":
                {
                   "Voip RxEQ SamplingRate"    :  16000,
                   "External Config"   :  "VOIPRxParametricEQ.cfg"
                },

            "VOIP Tx Parametric IIR":
                {
                   "External Config"   :  "VOIPTxParametricEQ.cfg"
                },

            "FB Automatic Gain Control": //a.k.a. "full band AGC"
                {
                    "txPath" : true,

                    "numBands" : 128,
                    "frameLength" : 128,
                    "sampleRate" : 16000,
                    "channelCount" : 1,

                    "bypass" : false,
                    "targetLeveldB" : -21,
                    "constantGaindB" : 22,
                    "gainSmoothingFactor" : 0.02,  //smoothing applied right before the dB gain is converted to linear

                    "noiseGainDecayRate" : 0.0002,
                    "noiseAdditionalAttenuatedB" : 10,

                    // gain limiting
                    "maxGaindB" : 12,
                    "minGaindB" : -20,
                    "maxGainIncRate" : 500,    // centi-dB/sec
                    "maxGainDecRate" : 500,    // centi-dB/sec

                    "SNRSmoothingConstant" : 0.001,
                    "SNRThreshold4GainAdjstdB" : 10,

                    // Compressor settings
                    "compressorAttack" : 0.5,
                    "compressorDecay"  : 0.09,
                    "compressorThresholdDB"  : -16.0,
                    "compressorRatio"  : 10.0,

                    "resAveGainThresh" : 0.1,

                    // long-term RMS tracking parameters
                    "rmsAttack" : 0.05,
                    "rmsFastAttack" : 0.1,
                    "rmsAttackEventLimit" : 10,
                    "rmsDecay" : 0.0005,
                    "rmsFastDecay" : 0.001,
                    "rmsDecayEventLimitShort" : 4,
                    "rmsDecayEventLimitLong" : 40,
                    "VAD0CountThreshold" : 100,

                    // VAD parameters
                    "envAttack" : 0.97,
                    "envDecay" : 0.008,
                    "envFastDecay" : 1.0,
                    "envCountLim" : 2,
                    "VADThresholddB" : 10.0,
                    "minFloordB" : -90,
                    "minSignaldB" : -70,
                    "noiseAttackRateSlow" : 0.0005,
                    "noiseAttackRateFast" : 0.0015,
                    "noiseAttackCountThrshld" : 100,
                    "noiseReleaseRate" : 0.04
                },

           "VOIP Rx Fullband AGC":
             {
                "txPath" : false,

                "numBands" : 128,
                "frameLength" : 128,
                "sampleRate" : 16000,
                "channelCount" : 1,

                "bypass" : false,
                "targetLeveldB" : -15,         // in dB
                "constantGaindB" : 4, //6, //5, //0,          // in dB
                "gainSmoothingFactor" : 0.01,  //smoothing applied right before the dB gain is converted to linear

                "noiseGainDecayRate" : 0.0002,
                "noiseAdditionalAttenuatedB" : 0,

                // gain limiting
                "maxGaindB" : 12,
                "minGaindB" : -20,
                "maxGainIncRate" : 500,    // centi-dB/sec
                "maxGainDecRate" : 500,    // centi-dB/sec

                "SNRSmoothingConstant" : 0.001,
                "SNRThreshold4GainAdjstdB" : 10,

                // Compressor settings
                "compressorAttack" : 0.6,
                "compressorDecay"  : 0.09,
                "compressorThresholdDB"  : -12.0, // not appropriate to follow Croissant
                "compressorRatio"  : 100.0,

                "resAveGainThresh" : 0.1, // dummy

                // long-term RMS tracking parameters
                "rmsAttack" : 0.05,
                "rmsFastAttack" : 0.1,
                "rmsAttackEventLimit" : 10,
                "rmsDecay" : 0.0002,
                "rmsFastDecay" : 0.001,
                "rmsDecayEventLimitShort" : 4,
                "rmsDecayEventLimitLong" : 80,
                "VAD0CountThreshold" : 200,

                // VAD parameters
                "envAttack" : 0.97,
                "envDecay" : 0.008,
                "envFastDecay" : 1.0,
                "envCountLim" : 2,
                "VADThresholddB" : 10.0,
                "minFloordB" : -90,
                "minSignaldB" : -70,
                "noiseAttackRateSlow" : 0.0005,
                "noiseAttackRateFast" : 0.0015,
                "noiseAttackCountThrshld" : 100,
                "noiseReleaseRate" : 0.04,


                "lengthVolTable" : 26,
                "voiceCallVolTable":
                [  -200.0,                                   // volume   0
                    -33.0,  -31.0,  -29.0,  -27.5,   -26.0,  // volumes  1 to  5
                    -23.5,  -21.5,  -19.0,  -17.5,   -15.5,  // volumes  6 to 10
                    -14.0,  -13.0,  -11.0,  -10.0,    -9.0,  // volumes 11 to 15
                     -8.0,   -7.0,   -6.0,   -5.0,    -4.0,  // volumes 16 to 20
                     -3.0,   -2.0,   -1.0,   -0.5,     0.0   // volumes 21 to 25
                ]
             // The above slightly revised from the original HAL volume table:
             //   [  -200.0,                                   // volume   0
             //       -40.0,  -38.0,  -36.0,  -34.0,   -32.0,  // volumes  1 to  5
             //       -30.0,  -28.0,  -26.0,  -24.0,   -22.0,  // volumes  6 to 10
             //       -20.0,  -18.0,  -16.0,  -14.0,   -12.0,  // volumes 11 to 15
             //       -11.0,   -9.0,   -8.0,   -6.0,    -5.0,  // volumes 16 to 20
             //        -4.0,   -3.0,   -2.0,   -1.0,     0.0   // volumes 21 to 25
             //   ]
             },

           "GainRampUp":
                {
                   "Ramp Up Time Constant (ms)"  : 1200.0,
                   "Delay Counter (ms)"          : 0.0,
                   "Initial Gain (dB)"           : -80,
                   "Ramp Type"                   : "LINEAR" //LINEAR or EXP
                },

            "Automatic Volume Leveling":
                {
                    "Bypass AVL"              : false,
                    // Volume table from /vendor/smartvolume/default_volume_tables.xml
                    "AVL_music_volTab"        :
                        [ -200,    -70,   -60, -51, -47, -44, -41, -38, -35, -32,
                          -29,     -27,   -25, -23, -21, -20, -19, -18, -16, -15,
                          -13.5, -12.5, -11.5, -10,  -8,  -6,  -5,  -4,  -2,  -1, 0
                        ],
                    "AVL_TTS_volTab"        :
                        [ -200,-44, -44, -44, -44, -41, -39, -37, -35, -33,
                          -31, -29, -27, -26, -25, -24, -23, -22, -21, -20,
                          -19, -18, -17, -16, -15, -14, -13, -13, -10, -10, -10
                        ]
                },

            "MBCL":
            {
                "External Config"  : [ "MBCL_20percent.cfg", "MBCL_20percent.cfg" , "MBCL_10percent.cfg", "MBCL_10percent.cfg", "MBCL_default.cfg", "MBCL_default.cfg"],
                "Speaker Power Modes" : [0, 1, 2, 3, 4, 5]
            },

            "VOIP MBCL":
                {
                   "mbclSamplingRate"  : 16000,
                   "mbc48k Bypass LookAhead Buffer" : true, // currently only targeting 48kHz MBC implementation for VoIP, ignored (always "true") for 16kHz
                   "External Config"  : [ "MBCL_VOIP.cfg", "MBCL_VOIP.cfg" , "MBCL_VOIP.cfg", "MBCL_VOIP.cfg", "MBCL_VOIP.cfg", "MBCL_VOIP.cfg"],
                   "Speaker Power Modes" : [0, 1, 2, 3, 4, 5]
                },

            "VOIP Tx Limiter":
                {
                   "lim_bypassed"        : false,
                   "lim_inVol"           : 0.0,   // level (dB)
                   "lim_thresh"          : -1.0,  // level (dB)
                   "lim_release"         : 180.0, // time (msec)
                   "lim_lookAhead"       : 2.0    // time (msec)
                },
            "Crossover":
                {
                    // The gain module will do a volume ramp smoothly, based
                    // on the ramp factor.  This is because the gain, in this
                    // case, is changed as a volume change takes place, thus, a
                    // ramp from one gain to the next.  The closer to one for
                    // "Linear Ramp Factor" to 1.0, the smoother and
                    // slower the ramp will be.
                    "Linear Ramp Factor"       : 0.96
                },

            "Equalizer FIR":
                {
                    "Bypass"                : false,
                    "External Coefficients" : [ "EQ_40.cfg","EQ_60.cfg","EQ_80.cfg","EQ_100.cfg" ],
                    "Volume Boundary"       : [  40, 60, 80, 100 ]  // The last number needs to be 100
                },

               "Equalizer Freq Domain FIR":
                {
                    "Bypass"                : false,
                    "Partition Length"      : 512,
                    "FFT Size"              : 1024,
                    "External Coefficients" :  [ "EQ_40.cfg","EQ_60.cfg","EQ_80.cfg","EQ_100.cfg" ],
                    "Volume Boundary"       : [  40, 60, 80, 100 ]  // The last number needs to be 100
                },
            "Full band output limiter":
                {
                    "lim_bypassed"      : false,
                    "lim_inVol"         : 0.0,
                    "lim_thresh"        : 0.0,
                    "lim_release"       : 20
                },
            "HPF 80Hz @ 16K":
                {
                    "Bypass"            : false,
                    "Coefficients"      :
                        [
                             -1.978964742877471,  -1.920823752121581,  -1.995031240858690, 0   , // a1
                             0.980148787818626,    0.923195725460049,   0.995935784603137, 0   , // a2
                             2.061764283274676,   12.481101519210988,   0.036465860122281, 1.0 , // b0
                             -4.12286229274,     -24.9615622297,       -0.07291290428,     0   , // b1
                             2.061764283274676,   12.481101519210988,   0.036465860122281, 0     // b2
                        ]
                },

            "Downsampler IIR":
                {
                    // taken from Knight (lpfIIRFilterCoeffs16Kat48K.h), after they have been normalized by dividing all the coefficients by a0
                    // in iirFilterMono.cpp::init()
                    "Coefficients"      :
                        [
                            -1.35381400585174560547,-1.16845381259918212891,-1.09131717681884765625,-0.74153685569763183594, // a1
                             0.67048937082290649414, 0.85192829370498657227, 0.96150147914886474609, 0.00000000000000000000, // a2
                             0.03503995016217231750, 0.48894411325454711914, 0.74522399902343750000, 0.50676357746124267578, // b0
                             0.01067659538239240646,-0.29441374540328979492,-0.62026363611221313477, 0.50676357746124267578, // b1
                             0.03503995016217231750, 0.48894411325454711914, 0.74522399902343750000, 0.00000000000000000000  // b2
                        ]
                },

            "VOIP Rx Resampler Coeffs":
                {
                    // taken from Knight (lpfIIRFilterCoeffs16Kat48K.h), after they have been normalized by dividing all the coefficients by a0
                    // in iirFilterMono.cpp::init()
                    "Coefficients"      :
                        [
                            -1.35381400585174560547,-1.16845381259918212891,-1.09131717681884765625,-0.74153685569763183594, // a1
                             0.67048937082290649414, 0.85192829370498657227, 0.96150147914886474609, 0.00000000000000000000, // a2
                             0.03503995016217231750, 0.48894411325454711914, 0.74522399902343750000, 0.50676357746124267578, // b0
                             0.01067659538239240646,-0.29441374540328979492,-0.62026363611221313477, 0.50676357746124267578, // b1
                             0.03503995016217231750, 0.48894411325454711914, 0.74522399902343750000, 0.00000000000000000000  // b2
                        ]
                },

            "Voice Activity Detector":
                {
                    // Device side bias factors always set to 1.0f. Bias factors are applied on the cloud.
                    "Ambient Gain"  : 1.0,
                    "Voice Gain"    : 1.0,

                    // Device gain values from AUDIOALG-18066
                    "System Gain Available" : true,
                    "PGA Gain"              : 24.0,
                    "ADC Gain"              : 0.0,
                    "AFE In Gain"           : 0.0,
                    "AFE Out Gain"          : 0.0,
                    "referenceAudioLevelOutputInDb" : -54.0
                },
            "Mic Occlusion Detector":
                {
                    "Enable Charging State" : true,      //enable occlusion detector (Docking & orientation)
                    "Enable Handheld Detect": true,     //sensor detect
                    "Enable AOD"            : false      //algorithm based occlusion detect
                },
            "Battery Level Handler":
                {
                    "Playback FBL Threshold Update":
                    {
                        "Level to Thresh Curve":
                        {
                            "interpolation type" : "step",

                            "inputs" :  [   0,      0.2,    0.53,    1.0 ],
                            "outputs" : [  -2,       -1,       0,      0 ]
                        }
                    }
                }
        }
}
